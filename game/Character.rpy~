init 3 python:
    class Chara:
        def __init__(self, sysName, name, role, location, spriteLink, shop):
            #Системное
            self.sysName = sysName #Системное имя для навигации по диалогу
            self.name = name #Имя
            self.role = role  #Род дестельности нпц
            
            self.location = location #Локации, где может находится нпц
            self.spriteLink = spriteLink #Адрес папки, где лежат спрайты
            if self.location:
                self.locSprite = self.spriteLink + "0locationSprite.png"  #Спрайт для локаций  
            self.mSprite = self.spriteLink + "0miniSprite.png"  #Спрайт для списка нпц
            self.bSprite = self.spriteLink + "0bigSprite.png" #Спрайт для досье
            self.talkSprite = self.spriteLink + "0talkSprite.png" #Спрайт для диалога
            
            self.shop = shop #Ссылка на магазин для торговцев
            
            self.reputationLvl = 0
                #Уровни репы: -20-11: не хотел бы с вами встречаться, -10-1: чувствует к вам неприязнь, 0: Не знакомы, 1: слышал о вас, 2-10: знает вас, 11-20: считает вас хорошим знакомым, 21-30: считает вас другом, 31-40: считает вас хорошим другом 

#====================================ОБЪЕКТЫ ПЕРОСОНАЖЕЙ
    #Эми из Алинора
    alinor_Amy = Chara(
        "Alinor_Amy_", #Системное имя
        "Девочка-торговка", #Имя
        "trader", #Роль (normal / trader)
        "", #Локация (оставить пустым, если диалог активируется через CG)
        "Chara/Shopper_girl/", #Адрес папки, где лежат спрайты
        alinor_amy_shop) #Магазин торговца




init:#=================================ИНИТ================================================================
    # ===========Диалоговые облачка=============
    
            image Amy smoke1 = "Talking/smoke1.png"
            image talkFog = "Talking/fog_bg.png"
            image talkFrame = "Talking/frame_npc.png"
            image Menu shop = "Talking/Npctalkmenu_shop.png"
            image Menu normal = "Talking/Npctalkmenu.png"
    
    #===========ЭМОЦИИ И ПЕРЕМЕННЫЕ=======================
        #====Эми из Алинора====
            $ amy_smile = Character("[alinor_Amy.name]", color="#e89f7f", who_outlines = [ (2, "#000000") ], show_two_window=True, show_side_image=Image("Chara/Shopper_girl/m_amy_smile.png", xalign=0.0, yalign=1.0))
            $ amy_verysmile = Character("[alinor_Amy.name]", color="#e89f7f", who_outlines = [ (2, "#000000") ], show_two_window=True, show_side_image=Image("Chara/Shopper_girl/m_amy_verysmile.png", xalign=0.0, yalign=1.0))
            $ amy_udiv = Character("[alinor_Amy.name]", color="#e89f7f", who_outlines = [ (2, "#000000") ], show_two_window=True, show_side_image=Image("Chara/Shopper_girl/m_amy_udiv.png", xalign=0.0, yalign=1.0))
            
            $alinor_amy_quest_find_ball = "Not activated"
     
label for_skip_MENU:
#====================================МЕНЮ ДИАЛОГА С НПЦ===================================================
    
        
    label talk_menu:
        $ talk_menu_first_appear = True
        if npcTalk.role == "trader":
            show talkFog
            show expression npcTalk.talkSprite
            show talkFrame
            show Menu shop
        elif npcTalk == "normal":
            show expression npcTalk.talkSprite
            show Menu normal
        with dissolve
          
    label talk_menu_label:
        call screen talk_menu_screen
        jump talk_menu_label
        
        
        
    screen talk_menu_screen:
        imagemap:
            if npcTalk.role == "trader":
                ground "Talking/Npctalkmenu_shop1.png"
                hover "Talking/Npctalkmenu_shopakt.png"
                
                hotspot (407, 44, 303, 53) clicked Call (npcTalk.sysName + str("talk"))
                hotspot (407, 106, 303, 53) clicked Call ("call_shop_label")
                hotspot (407, 170, 303, 53) clicked Call (npcTalk.sysName +  str("buisness"))
                hotspot (407, 234, 303, 53) clicked Call (npcTalk.sysName +  str("person"))
                hotspot (407, 298, 303, 53) clicked Call (npcTalk.sysName +  str("news"))
                hotspot (407, 362, 303, 53) clicked Call (npcTalk.sysName +  str("adventures"))
                hotspot (407, 426, 303, 53) clicked Call (npcTalk.sysName +  str("watch"))
                hotspot (407, 490, 303, 53) clicked Jump (this_location)
            elif npcTalk.role == "normal":
                ground "Talking/Npctalkmenu1.png"
                hover "Talking/Npctalkmenuakt.png"
                
                hotspot (407, 69, 303, 53) clicked Call (npcTalk.sysName +  str("talk"))
                hotspot (407, 133, 303, 53) clicked Call (npcTalk.sysName +  str("buisness"))
                hotspot (407, 197, 303, 53) clicked Call (npcTalk.sysName +  str("person"))
                hotspot (407, 261, 303, 53) clicked Call (npcTalk.sysName +  str("news"))
                hotspot (407, 325, 303, 53) clicked Call (npcTalk.sysName +  str("adventures"))
                hotspot (407, 389, 303, 53) clicked Call (npcTalk.sysName +  str("watch"))
                hotspot (407, 453, 303, 53) clicked Jump (this_location)
            
    label call_shop_label:
        $ call_shop (npcTalk.shop)
        return
    
label for_skip_CHARACTER:
#====================================ПЕРСОНАЖИ СТОЛИЦЫ АЛИНОРА===========================================
                                    
    #Лавка торговца. Эмили.
        label alinor_lavka_torgovca:
            
            $ npcTalk = alinor_Amy
            $ location("alinor_lavka_torgovca", "Alinor", "lavka_torgovca", "alinor_stolica", True)
            $ buttons('lavka_torgovca', ['talk_menu' , 'alinor_capital_gorod'], True)
            jump alinor_lavka_torgovca
            
        #=======ДИАЛОГИ========
            label Alinor_Amy_talk:
                if npcTalk.reputation == 0:
                    amy_verysmile "Дяденька, купите пироженку!"
                elif npcTalk.reputation >0 and npcTalk.reputation <= 10:
                    amy_smile "Привет, Джек! Купишь пироженку?"
                
            label Alinor_Amy_quests:
                if alinor_amy_quest_find_ball == "Not activated":
                    $jack = ["smile", "normal"]
                    j "Хм, я подумаю"
                    amy_smile "Подумайте, они очень вкусные!"
                    "Вы внимательно разглядываете пироженные, размышляя, стоят ли они вашего внимания."
                
            
